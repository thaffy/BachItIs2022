DROP SCHEMA IF EXISTS bysyklene;

CREATE SCHEMA bysyklene;

USE bysyklene;

CREATE TABLE Sykkelstativ
(
StativID CHAR(8) PRIMARY KEY,
Sted CHAR(15)
);

CREATE TABLE Kunde
(
Mobilnr CHAR(8) PRIMARY KEY,
Fornavn CHAR(15),
Etternavn CHAR(20),
Betalingskortnr CHAR(16)
);

CREATE TABLE Lås
(
StativID CHAR(8),
Låsnr CHAR(10),
CONSTRAINT StativIdPK PRIMARY KEY (StativID,Låsnr),
CONSTRAINT StativIdPK FOREIGN KEY (StativID) REFERENCES Sykkelstativ(StativID)
);

CREATE TABLE Sykkel
(
SykkelID CHAR(10) PRIMARY KEY,
Startdato TIMESTAMP NULL DEFAULT NULL,
StativID CHAR(8),
Låsnr CHAR(10),
CONSTRAINT StativIDFK FOREIGN KEY (StativID) REFERENCES Sykkelstativ(StativID),
CONSTRAINT LåsnrFK FOREIGN KEY (StativID,Låsnr) REFERENCES Lås(StativID,Låsnr)
);

CREATE TABLE Utleie
( 
SykkelID CHAR (10),
Utlevert TIMESTAMP,
Mobilnr CHAR(8),
Innlevert TIMESTAMP NULL DEFAULT NULL,
Beløp DECIMAL(6,2),
CONSTRAINT SykkelIDUtlevertPK PRIMARY KEY (SykkelID,Utlevert),
CONSTRAINT SykkelIDFK FOREIGN KEY (SykkelID) REFERENCES Sykkel(SykkelID),
CONSTRAINT MobilnrFK FOREIGN KEY (Mobilnr) REFERENCES Kunde(Mobilnr)
);

INSERT INTO Sykkelstativ VALUES('10000001', 'Alna');
INSERT INTO Sykkelstativ VALUES('10000002','Frogner');
INSERT INTO Sykkelstativ VALUES('10000003','Gamle Oslo');
INSERT INTO Sykkelstativ VALUES('10000004','Grorud');
INSERT INTO Sykkelstativ VALUES('10000005','Grünnerløkka');
INSERT INTO Sykkelstativ VALUES('10000006','Nordre Aker');
INSERT INTO Sykkelstativ VALUES('10000007','Nordstrand');
INSERT INTO Sykkelstativ VALUES('10000008','Sagene');
INSERT INTO Sykkelstativ VALUES('10000009','St. Hanshaugen');
INSERT INTO Sykkelstativ VALUES('10000010','Stovner');

INSERT INTO Kunde VALUES ('97749465','Markus','Hamre','1010200010002000');
INSERT INTO Kunde VALUES ('99765445','Terje','Terjesen','1011200010002000');
INSERT INTO Kunde VALUES ('45878713','Rolf','Rolfsen','1012200010002000');
INSERT INTO Kunde VALUES ('95323199','Lars','Larsen','1013200010002000');
INSERT INTO Kunde VALUES ('95993299','Morten','Mortensen','1014200010002000');
INSERT INTO Kunde VALUES ('45578883','Frida','Karlsson','1015200010002000');
INSERT INTO Kunde VALUES ('99878732','Therese','Johaug','1016200010002000');
INSERT INTO Kunde VALUES ('46459897','Marit','Bjørgen','1017200010002000');
INSERT INTO Kunde VALUES ('99458912','Markus','Hellner','1018200010002000');
INSERT INTO Kunde VALUES ('67439813','Anton','Antonsen','1019200010002000');
INSERT INTO Kunde VALUES ('47684509','Frode','Frodesen','1020200010002000');
INSERT INTO Kunde VALUES ('11111121','Charlotte','Kalla','1021200010002000');
INSERT INTO Kunde VALUES ('11111122','Mads','Hansen','1022200010002000');
INSERT INTO Kunde VALUES ('11111123','Ole','Olesen','1023200010002000');
INSERT INTO Kunde VALUES ('11111124','Martin','Martinsen','1024200010002000');
INSERT INTO Kunde VALUES ('11111125','Markus','Markussen','1025200010002000');
INSERT INTO Kunde VALUES ('11111126','Astrid','Astridsen','1026200010002000');
INSERT INTO Kunde VALUES ('11111127','Thomas','Thomassen','1027200010002000');
INSERT INTO Kunde VALUES ('11111128','Marie','Mariesen','1028200010002000');
INSERT INTO Kunde VALUES ('11111129','Per','Persen','1029200010002000');


INSERT INTO Lås  VALUES ('10000001','1000000001');
INSERT INTO Lås  VALUES ('10000002','1000000002');
INSERT INTO Lås  VALUES ('10000003','1000000003');
INSERT INTO Lås  VALUES ('10000004','1000000004');
INSERT INTO Lås  VALUES ('10000005','1000000005');
INSERT INTO Lås  VALUES ('10000006','1000000006');
INSERT INTO Lås  VALUES ('10000007','1000000007');
INSERT INTO Lås  VALUES ('10000008','1000000008');
INSERT INTO Lås  VALUES ('10000009','1000000009');
INSERT INTO Lås  VALUES ('10000010','1000000010');



INSERT INTO Sykkel VALUES ('1000000001','20200505','10000001','1000000001');
INSERT INTO Sykkel VALUES ('1000000002','20210205','10000002','1000000002');
INSERT INTO Sykkel VALUES ('1000000003','20020815','10000003','1000000003');
INSERT INTO Sykkel VALUES ('1000000004','20160607','10000004','1000000004');
INSERT INTO Sykkel VALUES ('1000000005','20200426',NULL,NULL);
INSERT INTO Sykkel VALUES ('1000000006','20210105',NULL,NULL);
INSERT INTO Sykkel VALUES ('1000000007','20160816','10000007','1000000007');
INSERT INTO Sykkel VALUES ('1000000008','19940622','10000008','1000000008');
INSERT INTO Sykkel VALUES ('1000000009','19891027','10000009','1000000009');
INSERT INTO Sykkel VALUES ('1000000010','20000115','10000010','1000000010');
INSERT INTO Sykkel VALUES ('1000000011','20130629',NULL,NULL);
INSERT INTO Sykkel VALUES ('1000000012','20210414','10000004','1000000004');
INSERT INTO Sykkel VALUES ('1000000013','20190622','10000006','1000000006');
INSERT INTO Sykkel VALUES ('1000000014','20200816','10000008','1000000008');
INSERT INTO Sykkel VALUES ('1000000015','20101230','10000010','1000000010');
INSERT INTO Sykkel VALUES ('1000000016','19960120','10000001','1000000001');
INSERT INTO Sykkel VALUES ('1000000017','20201010','10000003','1000000003');
INSERT INTO Sykkel VALUES ('1000000018','20150604',NULL,NULL);


INSERT INTO Utleie VALUES('1000000001','20200505','47684509',20201012,99.50);
INSERT INTO Utleie VALUES('1000000002',20180118,'99765445',NULL,NULL);
INSERT INTO Utleie VALUES('1000000003',20190618,'45878713',20190618,50.99);
INSERT INTO Utleie VALUES('1000000004',20200311,'95323199',NULL,NULL);
INSERT INTO Utleie VALUES('1000000005',20200105,'95993299',20200106,99.99);
INSERT INTO Utleie VALUES('1000000006',20180618,'45578883',20180620,200.00);
INSERT INTO Utleie VALUES('1000000007',20210225,'99878732',20210225,50.99);
INSERT INTO Utleie VALUES('1000000008',20191219,'46459897',20191220,100.00);
INSERT INTO Utleie VALUES('1000000009',20210312,'99458912',NULL,NULL);
INSERT INTO Utleie VALUES('1000000010',20200523,'67439813',20200525,300.50);